# simple spectrum analyzer
Вы явно не раз и не два видели визуализатор музыки. Это такие прыгающие полосочки в такт музыки. И мне стало интересно, как оно работает. С целью написать минимально рабочую, но при этом +- понятную версию визуализатора я и написал этот простенький скрипт. 

## Режимы

### Режим волны выглядит так:
![](https://imgur.com/ZBUTvZ8.png)
![](https://imgur.com/dQfnLF3.png)
### Режим частот выглядит так:
![](https://imgur.com/gNFhL2I.png)![](https://imgur.com/uf0pCL8.png)
## Установка
Скачиваем проект, заходим в папку с файлами и прописываем:
> pip install -r requirements.txt

## Настройка
В файле **`configs.py`** есть все настройки. По дефолту стоят те, которые я подобрал во время тестов на глаз. Пройдёмся по ним:

 - `chunk`:  Эта переменная хранит в себе величину обрабатываемых за раз данных. Чем **больше** чанк - тем **меньше** скорость. Его **минимальный** объём - 1024 
 - `sample_rate`:  Хранит в себе количество сэмплов (измерений) звука в секунду. Чем больше - тем чётче, но медленней, по аналогии с чанком.
 - `wave_xlim, wave_ylim`:  Кратко говоря - длинна и высота графика, который построить matplotlib в режиме волны
 - `frequencies_xlim, frequencies_ylim`:  По аналогии с предыдущим пунктом, длинна и высота графика, но только в режиме частот 
 - `fft_filter_multiplayer`:  Множитель фильтра Гаусса для режима частот
 - `wave_filter_multiplayer`:  Множитель как и в предыдущим пункте, но вот только для режима волны

## Возможные улучшения
Я не профессионал и это нужно понимать, когда будете рыться в коде. 
Сто процентов есть куча мест, где можно оптимизировать код, ну или упростить его в понимании, тут как пойдёт.

Из того, что я заметил, так это то, что я, возможно плохо написал функцию fft. Я использую там некоторые фильтры, которые нормализуют fft, но и те не совсем помогают. В прочем только из-за них я использую scipy, ведь я не смог написать свой нормальный  фильтр. Если постараться, то от scipy в проекте можно полностью отказаться. В коде есть альтернативные фильтры, но они закомментированы, лично мне они не понравились. Больше всего мне понравился фильтр Гаусса

Конечно из того, что можно было оптимизировать, так это способ вывода. Выводить всё через matplotlib хоть и удобно, но не выгодно по ресурсам. В конце концов, эта библиотека не предназначалась для анимации. Если вы захотите перевести всё это дело в pyqt5 или что-то похожее, то флаг вам в руки. 

## Важно!
Проект воспринимает только микрофон, который стоит по умолчанию. Если хотите слушать звук с динамиков, то нужно поставить по умолчанию стерео микшер. С этой фичей проект работает нормально только на винде, как я понял.

